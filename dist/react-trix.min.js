!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React")):"function"==typeof define&&define.amd?define(["React"],e):"object"==typeof exports?exports["react-trix"]=e(require("React")):t["react-trix"]=e(t.React)}(this,function(t){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="dist/",e(e.s=1)}([function(e,o){e.exports=t},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var React=o(0),r=function(t){function e(e){var o=t.call(this,e)||this;return o.editor=null,o.id=o.generateId(),console.log("ctor"),o}return n(e,t),e.prototype.generateId=function(){var t=Date.now(),e=0;return function(){t<=e?t=++e:e=t}(),"T"+t.toString()},e.prototype.componentDidMount=function(){var t=this.props;console.log("get by id",this.id),console.log(document.body.innerHTML),this.editor=document.getElementById("editor-"+this.id),this.editor?(this.editor.addEventListener("trix-initialize",this.handleChange.bind(this)),this.editor.addEventListener("trix-change",this.handleChange.bind(this)),t.uploadURL&&this.editor.addEventListener("trix-attachment-add",this.handleUpload.bind(this)),t.onEditorReady&&"function"==typeof t.onEditorReady&&t.onEditorReady(this.editor)):console.error("editor not found"),console.log("did mount")},e.prototype.componentWillUnmount=function(){this.editor.removeEventListener("trix-initialize",this.handleChange),this.editor.removeEventListener("trix-change",this.handleChange),this.props.uploadURL&&this.editor.removeEventListener("trix-attachment-add",this.handleUpload),console.log("will unmount")},e.prototype.handleChange=function(t){this.props.onChange&&(this.props.onChange(t.target.innerHTML,t.target.innerText),console.log("on change"))},e.prototype.handleUpload=function(t){var e=t.attachment;if(e.file)return this.uploadAttachment(e)},e.prototype.uploadAttachment=function(t){var e,o,n;if(e=t.file,o=new FormData,this.props.uploadData)for(var r in this.props.uploadData)o[r]=this.props.uploadData[r];return o.append("Content-Type",e.type),o.append("file",e),n=new XMLHttpRequest,n.open("POST",this.props.uploadURL,!0),n.upload.onprogress=function(e){var o=e.loaded/e.total*100;return t.setUploadProgress(o)},n.onload=function(){var e,o;if(204==n.status)return o=e=n.responseText,t.setAttributes({url:o,href:e})},n.send(o)},e.prototype.render=function(){var t=(this.state,this.props),e={id:"editor-"+this.id,input:"input-"+this.id};return t.autoFocus&&(e.autoFocus=t.autoFocus.toString()),t.placeholder&&(e.placeholder=t.placeholder),console.log("id:",this.id),React.createElement("div",null,React.createElement("trix-editor",e),React.createElement("input",{type:"hidden",id:"input-"+this.id,value:this.props.value}))},e}(React.Component);e.TrixEditor=r}])});